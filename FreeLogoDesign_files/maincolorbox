Maincolorbox=function(n,t,i){var r=this;r.tab=n;r.dom=$('<div class="color-picker"><div class="color-picker-color"><\/div><\/div>');r.colordom=r.dom.find(".color-picker-color");r.context=t;r.color=i;r.originalcolor=i.color;r.colorlist=[];r.cliplist=[];r.update=function(){$.each(r.colorlist,function(n,t){t.color=r.color.color});$.each(r.cliplist,function(n,t){t.update()})};r.start=function(){$.each(r.tab.drawningboard.cliplist,function(n,t){t.enabled()&&$.each(t.color.colorlist,function(n,i){i.color==r.originalcolor&&(r.colorlist.push(i),r.cliplist.push(t))})});r.context.prepend(r.dom);r.colordom.css("background-color",r.color.color);var n=r.colordom.colpick({onChange:function(n,t,i,u,f){$(f).css("background-color","rgba("+u.r+","+u.g+","+u.b+","+u.a+")");r.color.color="rgba("+u.r+","+u.g+","+u.b+","+u.a+")";r.update();r.tab.drawningboard.isFirefox&&r.tab.drawningboard.selector.refreshindex()},onSubmit:function(){r.color.color!=r.originalcolor&&(r.originalcolor=r.color.color.replaceAll(" ",""),r.tab.drawningboard.selector.changed=1,r.tab.drawningboard.selector.save())},onHide:function(){r.color.color!=r.originalcolor&&(r.originalcolor=r.color.color.replaceAll(" ",""),r.tab.drawningboard.selector.changed=1,r.tab.drawningboard.selector.save())}});n.colpickSetOriginal($.colpick.stringToRgba(r.color.color))}}