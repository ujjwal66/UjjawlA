Clip=function(n,t,i,r,u,f,e,o,s,h,c){var a="path, polygon, rect, circle, ellipse, polyline",l=this;l.path=n;l.width;l.height;l.svg;l.bg;l.drawningboard=i;l.group=l.drawningboard.workspace.g();l.rotationgroup;l.color=t.clone();l.x=parseInt(r);l.y=parseInt(u);l.realposition=!1;l.offset={x:s?s:0,y:h?h:0};l.scale=c?c:1;l.scalex=l.scale;l.scaley=l.scale;l.flipx=0;l.flipy=0;l.rotation=0;l.alpha=1;l.index;l.id=f;l.subid=e;l.groupid=0;l.nounId;l.callback=o;l.note;l.type="shape";l.statelist=[];l.name;l.iconname;l.start=function(){l.group.addClass("svg-clip");l.realposition||(l.x=l.x?parseInt(l.drawningboard.width/2+(l.x-l.offset.x/2)*l.scalex):parseInt(l.drawningboard.width/2),l.y=l.y?parseInt(l.drawningboard.height/2+(l.y-l.offset.y/2)*l.scaley):parseInt(l.drawningboard.height/2));l.path instanceof Node?l.include(l.path):Snap.load(l.path,l.loaded);l.index=l.drawningboard.selector.getnewindex(l.id,l.type);l.subid?(l.name=l.drawningboard.api.dictionary.element_shape+" "+l.id+"."+l.subid,l.iconname=l.drawningboard.api.dictionary.element_logo+" "+l.id):l.name=l.drawningboard.api.dictionary.element_shape+" "+l.id;l.drawningboard.selector.watch(l)};l.enabled=function(){return l.alpha};l.finish=function(){l.group.remove()};l.loaded=function(n){l.svg=n.select("svg");l.process()};l.include=function(n){l.svg=Snap(Snap(n).node.cloneNode(!0));l.process()};l.process=function(){l.width=parseInt(parseFloat(l.svg.attr("width")));l.height=parseInt(parseFloat(l.svg.attr("height")));l.bg=l.group.rect(0,0,l.width,l.height);l.bg.attr({fill:"none"});l.bg.addClass("svg-hitbox");l.group.add(l.svg);l.rotationgroup=l.svg.g();l.rotationgroup.add(l.svg.selectAll(a));l.group.attr({cursor:"move"});l.update();l.callback&&l.callback()};l.translateoffset=function(){return{x:l.width/2*l.scalex-l.width*l.flipx*l.scalex,y:l.height/2*l.scaley-l.height*l.flipy*l.scaley}};l.update=function(){var i,t,f,u,o;for(l.subid?(l.name=l.drawningboard.api.dictionary.element_shape+" "+l.id+"."+l.subid,l.iconname=l.drawningboard.api.dictionary.element_logo+" "+l.id):l.name=l.drawningboard.api.dictionary.element_shape+" "+l.id,l.svg.selectAll("[editorid=shapeContainer]").remove(),i=l.svg.selectAll(a),t=0,f=i.length;t<f;t++){var n=i[t],r=n.attr("fill"),e=n.attr("stroke");e?(n.attr("stroke",e),n.attr("fill","none")):r&&r.id&&(u=$(l.drawningboard.workspace.node).find("#"+r.id),u.length==1&&u.remove());o=l.color.getsvgcolor(l.drawningboard.workspace);n.attr("fill",o)}l.group.attr({transform:"translate("+parseFloat(l.x-l.translateoffset().x)+","+parseFloat(l.y-l.translateoffset().y)+") rotate("+parseInt(calc.fixDegree(l.rotation))+" "+l.translateoffset().x+" "+l.translateoffset().y+") scale("+l.scalex*(parseFloat(l.flipx)?-1:1)+","+l.scaley*(parseFloat(l.flipy)?-1:1)+")",opacity:l.alpha});l.alpha?(l.group.addClass("svg-visible"),l.group.removeClass("svg-hidden")):(l.group.removeClass("svg-visible"),l.group.addClass("svg-hidden"))}}