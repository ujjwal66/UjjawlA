var productIdsFileData=[],deletedFileData=[],deletedFileCreatedData=[],schemaData=[],tokenFileData=[],summaryFileData=[],widgetFileCount=[],alreadyLoadedWidgets=[];function getWidgetContainer(e,t,a){var r=e("#widget-container");return a&&(e(".ekomi-widget-"+t+".div_"+a).length?r=e(".ekomi-widget-"+t+".div_"+a):e(".ekomi-widget-"+t).length&&(r=e(".ekomi-widget-"+t))),r}function loadOldWidget(e,t){window.ekomiWidgetJquery;var a;if(a=null!=window._ekomiWidgetsServerUrl?window._ekomiWidgetsServerUrl:window._ekomiServerUrl,null==document.getElementById("ekomi-jquery")&&(void 0===window.jQuery||window.jQuery.fn.jquery<"3.1.0")){var r=document.createElement("script");r.setAttribute("type","text/javascript"),r.setAttribute("id","ekomi-jquery"),r.setAttribute("src","https://sw-assets.ekomiapps.de/static_resources/jquery.min.js"),r.readyState?r.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||n()}:r.onload=n,(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(r)}else{window.ekomiWidgetJquery=window.jQuery;var i=document.createElement("script");i.src="https://sw-assets.ekomiapps.de/static_resources/jquery-dateFormat.min.js",i.type="text/javascript",document.getElementsByTagName("head")[0].appendChild(i),d(e,t)}function n(){if(window.ekomiWidgetJquery=window.jQuery.noConflict(!0),s()&&s()<=9){var a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("src","https://sw-assets.ekomiapps.de/static_resources/jquery.xdomainrequest.min.js"),a.readyState?a.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||d(e,t)}:d(e,t),(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(a)}else d(e,t)}function s(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("msie")&&parseInt(e.split("msie")[1])}function d(e,t){window.ekomiWidgetJquery(document).ready(function(r){window.ekomiWidgetJquery('[data-ekomi-global-css-not-required="true"]').length||r("<link>",{rel:"stylesheet",type:"text/css",href:"https://sw-assets.ekomiapps.de/static_resources/widget.css"}).appendTo("head");function i(e,t){if(e.find(".ekomi-slick-slider").length&&(window.jq=r,r.getScript("https://sw-assets.ekomiapps.de/static_resources/slick.js",function(){r(".ekomi-slick-slider").each(function(){r(this).not(".slick-initialized").slick()})})),e.find("#last_review_date").length){var a=r.format.date(e.find("#last_review_date").html(),t);e.find("#last_review_date").html(a)}if(e.find("#last_positive_review_date").length){var i=r.format.date(e.find("#last_positive_review_date").html(),t);e.find("#last_positive_review_date").html(i)}if(e.find("#last_review_experience_date").length){var n=r.format.date(e.find("#last_review_experience_date").html(),t);e.find("#last_review_experience_date").html(n)}if(e.find("#today_date").length){var s=r.format.date(new Date,t);e.find("#today_date").html(s)}if(e.find("#last_positive_review_experience_date").length){var d=r.format.date(e.find("#last_positive_review_experience_date").html(),t);e.find("#last_positive_review_experience_date").html(d)}e.find(".review_experience_date").length&&r(".review_experience_date").each(function(){var e=r.format.date(r(this).html(),t);r(this).html(e)})}!function(e,t){if(-1!==alreadyLoadedWidgets.indexOf(e+"____"+t))return;alreadyLoadedWidgets.push(e+"____"+t);var n="";null!=window._customerId&&(n="customerId="+window._customerId);null!=window._language&&(0==n.length||""==n?n="language="+window._language:n+="&language="+window._language);n.length>0&&""!=n&&(n="?"+n);if(r("<link>",{rel:"stylesheet",type:"text/css",href:a+"/get-css/"+e+n}).appendTo("head"),r(".ekomi-widget-"+e).length)var s=r(".ekomi-widget-"+e);else var s=r("#widget-container");if(getWidgetContainer(r,e,t).html())return;var d=a+"/get-widget/"+e;r.get({url:d,cache:!0,data:{customerId:null!=window._customerId?window._customerId:"",productId:t,html:null!=window._ekomiUpdatedHtml?window._ekomiUpdatedHtml:"",language:null!=window._language?window._language:"",browser:navigator.appCodeName,website:document.location.origin}},function(a){var n="",d=a.indexOf("*|date_format_"),l=a.indexOf("|*",d);if(d>0){for(z=d+14;z<l;z++)n+=a[z];a=a.replace("*|date_format_"+n+"|*",""),"xxxxx"==n&&(n="d.M.yyyy")}else n="d.M.yyyy";var o=a.indexOf("SimpleScrollbar.initEl");if(o>0){var c=document.createElement("script");c.src="https://sw-assets.ekomiapps.de/static_resources/simple-scrollbar.min.js",c.type="text/javascript",c.onload=function(){s.html(a),i(s,n)},document.getElementsByTagName("head")[0].appendChild(c)}else if(t){for(var u=t.split(",").sort(),p="",_=0;_<u.length;_++){var g=u[_],m=g.replace(/\./g,"-_dot_-").split("%").join("-_perc_-").split("/").join("-_slash_-").replace(/\s+/g,"-_-_").replace("+","plus").replace("(","brkt").replace(")","brkt").replace("{","brkt").replace("}","brkt").replace("[","brkt").replace("]","brkt").split(":").join("-coln-");p+=".div_"+m}var f=r(p+".ekomi-widget-"+e);f.html(a).removeClass("data-ekomi-emp"),i(f,n)}else s.html(a),i(s,n)})}(e,t);var n=1;window.ekomiWidgetJquery(document).on("click",".translate_text_btn",function(e){if(e.preventDefault(),r(this).is("[disabled=disabled]"))return!1;var t=r(this),a=r(this).parents(".text_translate_parent").find(".text_translate");0!==r(this).parents(".text_translate_parent").find(".trans_after").length?a.each(function(){var e=r.grep(this.className.split(" "),function(e,t){return 0===e.indexOf("text_translate_")}).join(),t=r("."+e).html(),a=e.split("_")[2],i=r(this).parents(".text_translate_parent").find(".trans_after_"+a).text();if(t.trim()===i){var n=r(this).parents(".text_translate_parent").find(".trans_before_"+a).text();r(this).parents(".text_translate_parent").find(".text_translate_"+a).html(n)}else r(this).parents(".text_translate_parent").find(".text_translate_"+a).html(i)}):a.each(function(){!function(e,t,a){a.attr("disabled","disabled"),window.ekomiWidgetJquery.ajax({url:window._ekomiWidgetsServerUrl+"/translate-data",type:"POST",data:{text:e,crossDomain:!0,async:!0,dataType:"jsonp"},success:function(r){var i=r.translate_text;t.addClass("text_translate_"+n).html(i),t.after('<span class="trans_after trans_after_'+n+'" hidden>'+i+"</span>"),t.after('<span class="trans_before trans_before_'+n+'" hidden>'+e+"</span>"),n++,a.removeAttr("disabled")}})}(r(this).html().trim(),r(this),t)})})})}}!function(){window.ekomiWidgetJquery;var jqueryVersion="3.1.0",maxCallCount=1,defaultRetryTime=5e3,oldToken="",smartWidgetsServercloudFrontUrl;smartWidgetsServercloudFrontUrl=void 0!==window._ekomiWidgetsServerUrl?window._ekomiWidgetsServerUrl:window._ekomiServerUrl;var cloudFrontBaseUrl="https://smart-widget-assets.ekomiapps.de/";null!=window._bucket&&(cloudFrontBaseUrl="https://widgets.coddle.de/");var cloudFrontUrl=cloudFrontBaseUrl+"data_files",richSnippetStart='<script id="google-rich-snippet-structured-data" type="application/ld+json">',richSnippetEnd="<\/script>",localBusinessSnippetStart='<script type="application/ld+json">',localBusinessSnippetEnd="<\/script>",blackListTokens=["sf1083005a9426b0e5630","sf1083005a9426c23452c","sf1083005a84045d7445a","sf1083005a84016b3bc54","sf914485a0270efa05f1","sf1082605aa264256efa8","sf68945aba468f73234","sf37558599c3a89c9a73","sf3159259a52ab9d2aae","88954587dc1ce2e3c4","8895457d1574b3870b"],defaultValues={rating:0,empty_review_message:"No Reviews",rating_double:0,rating_floor:0,rating_grade:"",rating_grade_translated:"",filled_stars_computed_width:0,total_reviews_last_year:0,total_reviews:0,rating_percent:0,last_review_text:"",last_review_date:"0000-00-00 00:00:00",last_positive_review_text:"",second_last_positive_review_text:"",last_positive_review_date:"0000-00-00 00:00:00",seal_type:"standard",review_seal_type:"standard",ekomi_certificate_seo:"",positive_reviews_percentage:0,neutral_reviews_percentage:0,negative_reviews_percentage:0,widget_position:"bottom_left",date_format_xxxxx:"",today_date:"",your_company_name:"",review_title:"",review_text_title:"",review_date:"",review_time:"",review_text:"",review_rating:"",review_company_name:"",repeat_filled_stars_computed_width:0,review_pretty_datetime:"",total_positive_reviews:0,total_negative_reviews:0,total_neutral_reviews:0,random_postive_review_text:"",product_name:"",product_image_url:"",product_id:"","5_star_count":0,"5_star_percentage":0,"4_star_count":0,"4_star_percentage":0,"3_star_count":0,"3_star_percentage":0,"2_star_count":0,"2_star_percentage":0,"1_star_count":0,"1_star_percentage":0,rating_sff:0,total_reviews_sff:0,recommended_customers_percentage_sff:0,filled_stars_computed_width_sff:0,"5_star_count_sff":0,"5_star_percentage_sff":0,"4_star_count_sff":0,"4_star_percentage_sff":0,"3_star_count_sff":0,"3_star_percentage_sff":0,"2_star_count_sff":0,"2_star_percentage_sff":0,"1_star_count_sff":0,"1_star_percentage_sff":0,recommended_customers_percentage:0,user_reviews:"",slider_last_10_positive_reviews:"",carousel_slider_reviews:"",rating_group:0,total_reviews_group:0,filled_stars_computed_width_group:0,review_comment_text:"",comment_pretty_datetime:"",widget_social_like:[],widget_social_dislike:[],reviewer_firstname:"",reviewer_lastname:"",seal_type_group:"standard",rating_double_group:0,rating_percent_group:0,last_positive_review_text_group:"",review_images:""};if(null==document.getElementById("ekomi-jquery")&&(void 0===window.jQuery||window.jQuery.fn.jquery<jqueryVersion)){var script_tag=document.createElement("script");script_tag.setAttribute("type","text/javascript"),script_tag.setAttribute("id","ekomi-jquery"),script_tag.setAttribute("src","https://sw-assets.ekomiapps.de/static_resources/jquery.min.js"),script_tag.readyState?script_tag.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||scriptLoadHandler()}:script_tag.onload=scriptLoadHandler,(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(script_tag)}else window.ekomiWidgetJquery=window.jQuery,main();function arraySearch(e,t){for(var a in e)if(e[a]===t)return a;return!1}function scriptLoadHandler(){if(window.ekomiWidgetJquery=window.jQuery.noConflict(!0),isIE()&&isIE()<=9){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","https://sw-assets.ekomiapps.de/static_resources/jquery.xdomainrequest.min.js"),e.readyState?e.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||main()}:main(),(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(e)}else main()}function isSafari(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function isIE(){var e=navigator.userAgent.toLowerCase();return-1!==e.indexOf("msie")&&parseInt(e.split("msie")[1])}function getStringBetween(e,t,a){var r=(e=" "+e).indexOf(t);if(0===r)return"";r+=t.length;var i=e.indexOf(a,r)-r;return e.substr(r,i)}function main(){window.ekomiWidgetJquery(document).ready(function($){var customerId=window._customerId;if(!window.ekomiWidgetJquery('[data-ekomi-global-css-not-required="true"]').length){var css_link=$("<link>",{rel:"stylesheet",type:"text/css",href:"https://sw-assets.ekomiapps.de/static_resources/widget.css"});css_link.appendTo("head")}void 0!==window._ekomiToken&&loadWidget(window._ekomiToken),$.each(window._ekomiWidgetTokens,function(e,t){loadWidget(t)});var counter=1;function translateText(e,t,a){return a.attr("disabled","disabled"),window.ekomiWidgetJquery.ajax({url:window._ekomiWidgetsServerUrl+"/translate-data",type:"POST",data:{text:e,crossDomain:!0,async:!0,dataType:"jsonp"},success:function(r){var i=r.translate_text;t.addClass("text_translate_"+counter).html(i),t.after('<span class="trans_after trans_after_'+counter+'" hidden>'+i+"</span>"),t.after('<span class="trans_before trans_before_'+counter+'" hidden>'+e+"</span>"),counter++,a.removeAttr("disabled")}}),""}function isWidgetDeleted(e,t){if(e&&t){if(null!=deletedFileCreatedData[t])return!1;if(null!=deletedFileData[t])return-1!=$.inArray(e,deletedFileData[t]);var a=cloudFrontUrl+"/json/"+t+"_deletedWidgets.json",r=new XMLHttpRequest;r.open("GET",a,!1);var i="noValue";return r.onreadystatechange=function(){if(4===this.readyState)if(404===this.status)i=!1,deletedFileCreatedData[t]=1;else{var a=[];try{a=JSON.parse(this.responseText),deletedFileData[t]=a}catch(e){}i=-1!=$.inArray(e,a)}},r.send(),i}return!0}function loadWidget(widgetToken){widgetFileCount[widgetToken]=0,oldToken=widgetToken;var widgetDetail=getWidgetTokenOfOldToken(widgetToken,customerId,window._language);if(widgetToken=widgetDetail.new_token,oldToken!=widgetToken&&(null==document.getElementsByClassName("ekomi-widget-"+oldToken)[0]?document.getElementById("widget-container").className+=" ekomi-widget-"+widgetToken:document.getElementsByClassName("ekomi-widget-"+oldToken)[0].className+=" ekomi-widget-"+widgetToken),0!=$.inArray(widgetToken,blackListTokens)){customerId=widgetDetail.customerId;var productID="";if("ekomi-product-widget-identifier"==$(".ekomi-widget-"+widgetToken).next().attr("id")){var prodIdentifier=$("#ekomi-product-widget-identifier");$(".prod-data-emp").length&&(prodIdentifier=$(".ekomi-widget-"+widgetToken).next(".prod-data-emp").first(),prodIdentifier.removeClass("prod-data-emp")),productID=prodIdentifier.text();var dataContainer=prodIdentifier.prev(),multipleProducts=productID.split(",").sort();productID=multipleProducts.join(","),$.each(multipleProducts,function(e,t){dataContainer.addClass("div_"+t.trim().replace(/\./g,"-_dot_-").split("%").join("-_perc_-").split("/").join("-_slash_-").replace(/\s+/g,"-_-_").replace("+","plus").replace("(","brkt").replace(")","brkt").replace("{","brkt").replace("}","brkt").replace("[","brkt").replace("]","brkt").split(":").join("-coln-"))}),productID.trim()||(productID="")}loadHtml(productID,widgetToken)}function getWidgetHtmlFromResponse(e){var t=e.html;return-1!=t.indexOf("google-rich-snippet-structured-data")&&(t=t.replace('<script id="google-rich-snippet-structured-data" type="application/ld+json">{"@context":"http://schema.org/","@type":"Service","aggregateRating":{"@type":"AggregateRating","ratingValue":"*|rating|*","bestRating":"5","reviewCount":"*|total_reviews|*"}}<\/script>',"")),t}function loadAfterWidgetFileLoad(e,t,a){var r=getWidgetHtmlFromResponse(e);appendCss(e.css);var i=e.widget_data;null!=i.is_lp||null!=i.load_combined_summary?loadOldWidget(a,t):loadDataInHtml(r,i,t,a)}function loadHtml(e,t){if(null!=tokenFileData[t]&&"loading"!=tokenFileData[t])loadAfterWidgetFileLoad(tokenFileData[t],e,t);else if("loading"==tokenFileData[t])setTimeout(function(){loadHtml(e,t)},1e3);else{var a=cloudFrontUrl+"/widget/"+t+".json";tokenFileData[t]="loading";var r=new XMLHttpRequest;r.open("GET",a,!0),r.onreadystatechange=function(){if(4===this.readyState){if(404===this.status){if(widgetFileCount[t]>=maxCallCount)return;if(widgetFileCount[t]=widgetFileCount[t]+1,0!=isWidgetDeleted(t,customerId))return;updateWidgetFile(t,customerId)}if(200===this.status){var a=JSON.parse(this.responseText);tokenFileData[t]=a,loadAfterWidgetFileLoad(a,e,t)}}},r.send()}}function appendCss(e){var t=e,a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");a.appendChild(r),r.type="text/css",r.className="eKomi-widget-css",r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}function updateWidgetFile(e,t){if(e&&t){var a=smartWidgetsServercloudFrontUrl+"/update-widget-file/"+e+"?customerId="+t,r=new XMLHttpRequest;r.open("GET",a,!1),r.onreadystatechange=function(){4===this.readyState&&200===this.status&&setTimeout(function(){loadHtml(productID,e)},defaultRetryTime)},r.send()}}function replaceDefaultValues(e,t,a){var r=!1;for(var i in defaultValues)if(defaultValues.hasOwnProperty(i)){var n=new RegExp("\\*\\|"+i+"\\|\\*","g");t!=(t=t.replace(n,defaultValues[i]))&&(r=!0)}r&&!a&&createJsonFile();var s=new RegExp("\\*\\|(.*?)\\|\\*","g");t=t.replace(s,"");var d=$("#widget-container");$(".ekomi-widget-"+widgetToken+".div_"+a).length?d=$(".ekomi-widget-"+widgetToken+".div_"+a):$(".ekomi-widget-"+e).length&&(d=$(".ekomi-widget-"+e)),d.html(t)}function createJsonFile(){}function getWidgetTokenOfOldToken(e,t,a){var r=[];if(0==e.indexOf("sf"))return r.new_token=e,r.customerId=t,r;var i=cloudFrontUrl+"/mapping/default_mapping.json";void 0!==t&&""!==t&&(i=cloudFrontUrl+"/mapping/"+t+"_mapping.json");var n="",s=new XMLHttpRequest;return s.open("GET",i,!1),s.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var r=JSON.parse(this.responseText)[e];if(void 0!==t&&""!==t){var i=r.length;if(void 0===a||""===a)n=r[0].new_token,t=r[0].customerId;else for(var s=0;s<i;s++)r[s].language===a&&(n=r[s].new_token)}else n=r.new_token,t=r.customerId}},s.send(),r.new_token=n,r.customerId=t,r}function getSealImageHeight(e){return e<41?33:e<46?41:e<56?46:e<66?56:e<72?66:e<74?72:e<81?74:e<90?81:e<105?90:e<150?105:e<232?150:e<500?232:500}function loadDataAfterSummaryLoad(e,t,a,r,i,n,s){var d=!1;if((null!=i.is_rich||null!=i.is_rich_with_reviews||null!=i.is_local_business)&&e.total_reviews>0){var l=r;if(null!=schemaData[customerId]&&null!=schemaData[customerId][l])void 0!==i.is_rich_with_reviews?a+=richSnippetStart+schemaData[customerId][l].rich_snippet_with_reviews+richSnippetEnd:void 0!==i.is_rich&&(a+=richSnippetStart+schemaData[customerId][l].rich_snippet+richSnippetEnd),void 0!==i.is_local_business&&(a+=richSnippetStart+schemaData[customerId][l].local_business+richSnippetEnd);else{d=!0;var o=cloudFrontUrl+"/json/"+customerId+"_schema.json";$(".data-ekomi-emp").length&&r&&(o=cloudFrontUrl+"/product/"+customerId+"/"+s+"/schema.json");var c=new XMLHttpRequest;c.open("GET",o,!0),c.onreadystatechange=function(){if(4===this.readyState){if(this.status,200==this.status){var d=JSON.parse(this.responseText);null!=d&&(null==schemaData[customerId]&&(schemaData[customerId]=[]),schemaData[customerId][l]=d,void 0!==i.is_rich_with_reviews&&null!=d.rich_snippet_with_reviews?a+=richSnippetStart+d.rich_snippet_with_reviews+richSnippetEnd:void 0!==i.is_rich&&null!=d.rich_snippet&&(a+=richSnippetStart+d.rich_snippet+richSnippetEnd),void 0!==i.is_local_business&&(a+=localBusinessSnippetStart+d.local_business+localBusinessSnippetEnd))}null==e&&replaceDefaultValues(t,a,r),replacePlaceholders(t,e,i,a,n,r,s)}},c.send()}}d||(null==e&&replaceDefaultValues(t,a,r),replacePlaceholders(t,e,i,a,n,r,s))}function replaceSealIfRequired(e,t,a){if(null!=e.enableSeal){var r=$("#widget-container");if($(".ekomi-widget-"+a+".div_"+t).length?r=$(".ekomi-widget-"+a+".div_"+t):$(".ekomi-widget-"+a).length&&(r=$(".ekomi-widget-"+a)),null!=e.doHideWidget&&e.doHideWidget)r.hide();else{var i=0;r.children().each(function(){i+=ekomiWidgetJquery(this).outerHeight(!0)});var n=getSealImageHeight(i),s='<img src="'+cloudFrontBaseUrl+"resources/en_seal_standard-"+n+'.png">';r.html(s)}}}function loadAfterProductIdLoaded(e,t,a,r,i,n,s){if(null!=summaryFileData[e]&&"loading"!=summaryFileData[e])loadDataAfterSummaryLoad(summaryFileData[e],i,t,r,a,n,s);else if("loading"==summaryFileData[e])setTimeout(function(){loadAfterProductIdLoaded(e,t,a,r,i,n,s)},1e3);else{summaryFileData[e]="loading";var d=new XMLHttpRequest;d.open("GET",e,!0),d.onreadystatechange=function(){if(4===this.readyState&&(404===this.status&&replaceDefaultValues(i,t,r),200===this.status)){var d=JSON.parse(this.responseText);summaryFileData[e]=d,loadDataAfterSummaryLoad(d,i,t,r,a,n,s)}},d.send()}}function createUpdateProductIdFile(e,t){var a=smartWidgetsServercloudFrontUrl+"/create-product-file",r=new XMLHttpRequest,i=new FormData;i.append("shop_id",t),i.append("product_id",e),r.open("POST",a,!0),r.send(i)}function loadDataInHtml(e,t,a,r){var i=cloudFrontUrl+"/json/"+customerId+"_seller_summary.json";if(null!=t.group_shops_hash)loadAfterProductIdLoaded(i=cloudFrontUrl+"/group/"+t.group_shops_hash+"_summary.json",e,t,a,r,!0,null);else if($(".data-ekomi-emp").length&&a){multipleProducts=a.split(",").sort().sort(function(e,t){return e-t}),a=multipleProducts.join(",");var n=cloudFrontUrl+"/product/"+customerId+"/productIds.json";if(null!=productIdsFileData[customerId]){var s=arraySearch(productIdsFileData[customerId],a);if(0==s)createUpdateProductIdFile(a,customerId),replaceDefaultValues(r,e,a);else{loadAfterProductIdLoaded(i=cloudFrontUrl+"/product/"+customerId+"/"+s+"/summary.json",e,t,a,r,!1,s)}}else{var d=new XMLHttpRequest;d.open("GET",n,!0);d.onreadystatechange=function(){if(4===this.readyState&&(404===this.status&&null,200===this.status)){var i="";try{i=JSON.parse(this.responseText),productIdsFileData[customerId]=i}catch(e){}var n=arraySearch(i,a);if(0==n)createUpdateProductIdFile(a,customerId),replaceDefaultValues(r,e,a);else{loadAfterProductIdLoaded(cloudFrontUrl+"/product/"+customerId+"/"+n+"/summary.json",e,t,a,r,!1,n)}}},d.send()}}else loadAfterProductIdLoaded(i,e,t,a,r,!1,null)}function replaceRepeatTag(e,t,a,r,i,n,s,d){var l=n[0].match(/(?:_[a-zA-Z]+)*_/i)[0].replace(/_/g,""),o=n[0].match(/\d+/)[0],c=n[0],u=new XMLHttpRequest;""==l&&(l="random");var p="";p=null!=a.group_shops_hash?cloudFrontUrl+"/group/"+a.group_shops_hash+"_"+l+"_1.json":r?cloudFrontUrl+"/product/"+customerId+"/"+i+"/"+l+"_1.json":cloudFrontUrl+"/json/"+customerId+"_"+l+"_1.json",u.open("GET",p,!0),u.onreadystatechange=function(){if(4===this.readyState){if(404===this.status){if(replaceDefaultValues(d,t,r),replaceSealIfRequired(e,r,d),r)return null;createJsonFile()}if(200===this.status)try{var i=JSON.parse(this.responseText);if(null==i)return t;var n="",u="</repeat";l&&"random"!=l&&(u+="_"+l),o&&(u+="_"+o),u+=">",-1==t.indexOf(u)&&(u="</repeat>");for(var p=getStringBetween(t,c,u),_=getDateFormat(p),g=0;g<o&&g<i.length;g++){var m=i[g],f=p;for(var w in m){if("review_rating"==w)f=replaceRepeatFilledStarComputedWidth(a,m[w],f),f=replaceReviewPlaceholders(m[w],f,a);else if("review_date"==w){if(isNumber(m[w]))var h=new Date(1e3*m[w]);else if(isSafari()){var v=formattedDate(m[w]).split("-").join("/");h=new Date(v)}else h=new Date(formattedDate(m[w]));m[w]=getDate(_,h);var y=h.getHours()+":"+(h.getMinutes()<10?"0"+h.getMinutes():h.getMinutes()),k=new RegExp("\\*\\|review_time\\|\\*","g");f=f.replace(k,y);var x=new RegExp("\\*\\|review_date_only\\|\\*","g");f=f.replace(x,getDate(getDateFormat(t),h))}var S=new RegExp("\\*\\|"+w+"\\|\\*","g");f=f.replace(S,m[w])}n+=f}""==n&&(n="*|empty_review_message|*");var D=c+p+u;t=t.replace(D,n),replaceData(e,t,a,s,d),replaceSealIfRequired(e,r,d)}catch(e){}}},u.send()}function isNumber(e){return/^-?[\d.]+(?:e-?\d+)?$/.test(e)}function formattedDate(e){var t=" ";-1!=e.indexOf("/")?t="/":-1!=e.indexOf(".")?t=".":-1!=e.indexOf("-")&&(t="-");var a=e.split(t),r=a[0],i=a[1];return a[2].split(" ")[0].trim()+"-"+i+"-"+r+" "+a[2].split(" ")[1].split(":")[0].trim()+":"+a[2].split(" ")[1].split(":")[1].trim()}function getDate(e,t){var a=" ";-1!=e.indexOf("/")?a="/":-1!=e.indexOf(".")?a=".":-1!=e.indexOf("-")&&(a="-");for(var r=e.split(a),i=r.length,n="",s=0;s<i;s++)-1!=r[s].indexOf("d")||-1!=r[s].indexOf("D")?n+=""==n?t.getDate()>9?t.getDate():"0"+t.getDate():a+(t.getDate()>9?t.getDate():"0"+t.getDate()):-1!=r[s].indexOf("m")||-1!=r[s].indexOf("M")?n+=""==n?t.getMonth()>8?t.getMonth()+1:"0"+(t.getMonth()+1):a+(t.getMonth()>8?t.getMonth()+1:"0"+(t.getMonth()+1)):-1==r[s].indexOf("y")&&-1==r[s].indexOf("Y")||(n+=""==n?t.getFullYear():a+t.getFullYear());return n}function replaceTodayDate(e){if(-1==e.indexOf("*|today_date|*"))return e;var t=getDate(getDateFormat(e),new Date),a=new RegExp("\\*\\|today_date\\|\\*","g");return e.replace(a,t)}function getSealType(e,t){var a="standard";if(ratingRange(t,4.8,5.1)&&e>=50)a="gold";else if(ratingRange(t,4.45,4.8)&&e>=50)a="silver";else if(ratingRange(t,4,4.45)&&e>=50)a="bronze";else if(ratingRange(t,4,5.1)&&e<50)a="neutral";else if(ratingRange(t,0,4.1)&&e<50)return a;return a}function ratingRange(e,t,a){return e>=t&&e<a}function replaceSeal(e,t,a){var r=new RegExp("\\*\\|seal_type\\|\\*","g"),i=new RegExp("\\*\\|seal_type_group\\|\\*","g"),n=getSealType(e,t);return(a=a.replace(i,n)).replace(r,n)}function getRatingGrade(e,t){var a="";return ratingRange(t,4.8,5.1)&&e>=50?a="excellent":ratingRange(t,4.45,4.8)&&e>=50?a="excellent":ratingRange(t,4,4.45)&&e>=50?a="good":ratingRange(t,4,5.1)&&e<50?(a="good",ratingRange(t,4.45,5.1)&&(a="excellent")):ratingRange(t,0,4.1)&&e<50&&(a=""),a}function replaceRatingGrade(e,t,a,r){var i=new RegExp("\\*\\|rating_grade\\|\\*","g"),n=new RegExp("\\*\\|rating_grade_translated\\|\\*","g"),s=getRatingGrade(t,a),d=e.rating_grade_translated[s];return""==s&&(d=""),(r=r.replace(n,d)).replace(i,s)}function replaceFilledStarComputedWidth(widgetData,rating,widgetHtml){var regexTranslated=new RegExp("\\*\\|filled_stars_computed_width\\|\\*","g"),regexFilledStarGroup=new RegExp("\\*\\|filled_stars_computed_width_group\\|\\*","g"),formula=widgetData.filled_stars_computed_formula;if(formula){var filled_stars_computed_width=formula.replace("*|rating|*",rating).replace("*|rating_floor|*",Math.floor(rating));return filled_stars_computed_width=eval(filled_stars_computed_width),widgetHtml=widgetHtml.replace(regexTranslated,filled_stars_computed_width),widgetHtml.replace(regexFilledStarGroup,filled_stars_computed_width)}return widgetHtml}function replaceRepeatFilledStarComputedWidth(widgetData,rating,widgetHtml){var regexTranslated=new RegExp("\\*\\|repeat_filled_stars_computed_width\\|\\*","g"),formula=widgetData.repeat_filled_stars_computed_formula;if(formula){var filled_stars_computed_width=formula.replace("*|rating|*",rating).replace("*|rating_floor|*",Math.floor(rating));return filled_stars_computed_width=eval(filled_stars_computed_width),widgetHtml.replace(regexTranslated,filled_stars_computed_width)}return widgetHtml}function replaceReviewPlaceholders(e,t,a){var r=new RegExp("\\*\\|review_rating_grade\\|\\*","g"),i=new RegExp("\\*\\|review_seal_type\\|\\*","g"),n=getRatingGrade(0,e),s=getSealForReview(e),d=a.rating_grade_translated[n];return""==n&&(d=""),t=(t=t.replace(r,d)).replace(i,s)}function getSealForReview(e){var t="standard";if(ratingRange(e,4.8,5.1))t="gold";else if(ratingRange(e,4.45,4.8))t="silver";else{if(!ratingRange(e,4,4.45))return t;t="bronze"}return t}function replaceRatingPlaceholders(e,t){var a=new RegExp("\\*\\|rating_double\\|\\*","g"),r=new RegExp("\\*\\|rating_floor\\|\\*","g"),i=new RegExp("\\*\\|rating_percent\\|\\*","g"),n=new RegExp("\\*\\|rating_group\\|\\*","g"),s=new RegExp("\\*\\|rating_double_group\\|\\*","g"),d=new RegExp("\\*\\|rating_percent_group\\|\\*","g");return(t=(t=(t=(t=(t=t.replace(r,Math.floor(e))).replace(i,Math.round(e/5*100))).replace(n,e)).replace(s,2*e)).replace(d,Math.round(e/5*100))).replace(a,2*e)}function replaceSpecificPlaceholders(e,t,a,r){var i=null!=e.total_reviews?e.total_reviews:0;if(r){if(null!=e.rating_group)s=e.rating_group;else if(null!=e.rating)s=e.rating;if(null!=s){a=replaceFilledStarComputedWidth(t,s,a=replaceRatingPlaceholders(s,a=replaceRatingGrade(t,i,s,a=replaceSeal(i,s,a))));var n=new RegExp("\\*\\|ekomi_certificate_seo\\|\\*","g");a=a.replace(n,t.ekomi_certificate_seo)}}else{var s;if(null!=e.rating&&null!=i)a=replaceFilledStarComputedWidth(t,s=null!=e.rating?e.rating:0,a=replaceRatingPlaceholders(s,a=replaceRatingGrade(t,i,s,a=replaceSeal(i,s,a))))}return a}function replaceData(e,t,a,r,i){for(var n in e)if(e.hasOwnProperty(n)){var s=new RegExp("\\*\\|"+n+"\\|\\*","g");void 0!==n[0]&&"<"==n[0]&&(s=new RegExp(n,"g")),t=t.replace(s,e[n])}replaceDataTimePlaceholdersAndInsertInContainer(i,t=replaceSpecificPlaceholders(e,a,t,r),productID)}function replacePlaceholders(e,t,a,r,i,n,s){var d=(r=replaceTodayDate(r)).match(/<repeat_[^>]+>/i);null!=d&&void 0!==d[0]?replaceRepeatTag(t,r,a,n,s,d,i,e):(replaceData(t,r,a,i,e),replaceSealIfRequired(t,n,e))}function getDateFormat(e){var t="",a=e.indexOf("*|date_format_"),r=e.indexOf("|*",a);if(a>0){for(z=a+14;z<r;z++)t+=e[z];"xxxxx"===t&&(t="d.M.yyyy")}else t="d.M.yyyy";return t}function replaceDataTimePlaceholdersAndInsertInContainer(e,t,a){var r=getDateFormat(t);if((t=t.replace("*|date_format_"+r+"|*","")).indexOf("SimpleScrollbar.initEl")>0){var i=document.createElement("script");i.src="https://sw-assets.ekomiapps.de/static_resources/simple-scrollbar.min.js",i.type="text/javascript",i.onload=function(){replaceDefaultValues(e,t,a)},document.getElementsByTagName("head")[0].appendChild(i)}else if($(".data-ekomi-emp").length&&a){for(var n=a.split(",").sort(),s="",d=0;d<n.length;d++){s+=".div_"+n[d].replace(/\./g,"-_dot_-").split("%").join("-_perc_-").split("/").join("-_slash_-").replace(/\s+/g,"-_-_").replace("+","plus")}$(s+".ekomi-widget-"+e).html(t).removeClass("data-ekomi-emp"),replaceDefaultValues(e,t,a)}else replaceDefaultValues(e,t,a);var l=$("#widget-container");$(".ekomi-widget-"+e).length&&(l=$(".ekomi-widget-"+e)),l.find(".ekomi-slick-slider").length&&(window.jq=$,$.getScript("https://sw-assets.ekomiapps.de/static_resources/slick.js",function(){$(".ekomi-slick-slider").each(function(){$(this).not(".slick-initialized").slick()})}))}}window.ekomiWidgetJquery(document).on("click",".translate_text_btn",function(e){if(e.preventDefault(),$(this).is("[disabled=disabled]"))return!1;var t=$(this),a=$(this).parents(".text_translate_parent").find(".text_translate");0!==$(this).parents(".text_translate_parent").find(".trans_after").length?a.each(function(){var e=$.grep(this.className.split(" "),function(e){return 0===e.indexOf("text_translate_")}).join(),t=$("."+e).html(),a=e.split("_")[2],r=$(this).parents(".text_translate_parent").find(".trans_after_"+a).text();if(t.trim()===r){var i=$(this).parents(".text_translate_parent").find(".trans_before_"+a).text();$(this).parents(".text_translate_parent").find(".text_translate_"+a).html(i)}else $(this).parents(".text_translate_parent").find(".text_translate_"+a).html(r)}):a.each(function(){translateText($(this).html().trim(),$(this),t)})})})}window.ekomiWidgetMain=main}();
