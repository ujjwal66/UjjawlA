Alignbar=function(n){var t=this;t.dom;t.drawningboard=n;t.selector=t.drawningboard.selector;t.target;t.eventtype="touchstart mousedown";t.start=function(){t.dom=$("#align-bar");t.drawningboard.formatsvg(t.dom);t.registerevents();t.dom.hide()};t.hide=function(){t.dom.hide()};t.show=function(){t.dom.show()};t.select=function(n){t.target=n;t.selector=t.drawningboard.selector;n&&n.length>1&&(t.selector.explodedmode||!t.selector.targetisicon(n)&&!t.selector.targetisgroup(n))?t.show():t.hide()};t.registerevents=function(){t.dom.find(".align-left").on(t.eventtype,t.alignLeft);t.dom.find(".align-right").on(t.eventtype,t.alignRight);t.dom.find(".align-center").on(t.eventtype,t.alignCenter);t.dom.find(".align-middle").on(t.eventtype,t.alignMiddle);t.dom.find(".align-top").on(t.eventtype,t.alignTop);t.dom.find(".align-bottom").on(t.eventtype,t.alignBottom)};t.posAlign=function(){t.selector.gettargetdata();t.selector.update();t.selector.save()};t.preAlign=function(){t.selector.changed=1;t.selector.closecontext()};t.alignLeft=function(n){n.preventDefault();t.preAlign();$.each(t.target,function(n,i){var r=t.selector.getrotatedcoordsoffset(i,i.x,i.y),f=Math.min.apply(Math,[r.x1,r.x2,r.x3,r.x4]),h=Math.max.apply(Math,[r.x1,r.x2,r.x3,r.x4]),e=(h-f)/2,u,o,s;(t.selector.clipisicon(i)||t.selector.clipisgroup(i))&&!t.selector.explodedmode&&(u=t.selector.clipisgroup(i)?t.selector.getgroupcoords(i):t.selector.geticoncoords(i),o=Math.min.apply(Math,[u.x1,u.x2,u.x3,u.x4]),s=f-o,e+=s);setTimeout(function(){i.x=e+(t.selector.x+t.selector.selectionborderw-t.selector.width/2);i.update()},1)});setTimeout(function(){t.posAlign()},1)};t.alignRight=function(n){n.preventDefault();t.preAlign();$.each(t.target,function(n,i){var r=t.selector.getrotatedcoordsoffset(i,i.x,i.y),h=Math.min.apply(Math,[r.x1,r.x2,r.x3,r.x4]),f=Math.max.apply(Math,[r.x1,r.x2,r.x3,r.x4]),e=(f-h)/2,u,o,s;(t.selector.clipisicon(i)||t.selector.clipisgroup(i))&&!t.selector.explodedmode&&(u=t.selector.clipisgroup(i)?t.selector.getgroupcoords(i):t.selector.geticoncoords(i),o=Math.max.apply(Math,[u.x1,u.x2,u.x3,u.x4]),s=o-f,e+=s);setTimeout(function(){i.x=-e+(t.selector.x-t.selector.selectionborderw+t.selector.width/2);i.update()},1)});setTimeout(function(){t.posAlign()},1)};t.alignCenter=function(n){n.preventDefault();t.preAlign();$.each(t.target,function(n,i){var u,r;(t.selector.clipisicon(i)||t.selector.clipisgroup(i))&&!t.selector.explodedmode?(u=t.selector.clipisgroup(i)?t.selector.getgroupcoords(i):t.selector.geticoncoords(i),r=t.selector.x-u.xc+i.x):r=t.selector.x;setTimeout(function(){i.x=r;i.update()},1)});setTimeout(function(){t.posAlign()},1)};t.alignMiddle=function(n){n.preventDefault();t.preAlign();$.each(t.target,function(n,i){var u,r;(t.selector.clipisicon(i)||t.selector.clipisgroup(i))&&!t.selector.explodedmode?(u=t.selector.clipisgroup(i)?t.selector.getgroupcoords(i):t.selector.geticoncoords(i),r=t.selector.y-u.yc+i.y):r=t.selector.y;setTimeout(function(){i.y=r;i.update()},1)});setTimeout(function(){t.posAlign()},1)};t.alignTop=function(n){n.preventDefault();t.preAlign();$.each(t.target,function(n,i){var r=t.selector.getrotatedcoordsoffset(i,i.x,i.y),f=Math.min.apply(Math,[r.y1,r.y2,r.y3,r.y4]),h=Math.max.apply(Math,[r.y1,r.y2,r.y3,r.y4]),e=(h-f)/2,u,o,s;(t.selector.clipisicon(i)||t.selector.clipisgroup(i))&&!t.selector.explodedmode&&(u=t.selector.clipisgroup(i)?t.selector.getgroupcoords(i):t.selector.geticoncoords(i),o=Math.min.apply(Math,[u.y1,u.y2,u.y3,u.y4]),s=f-o,e+=s);setTimeout(function(){i.y=e+(t.selector.y+t.selector.selectionborderh-t.selector.height/2);i.update()},1)});setTimeout(function(){t.posAlign()},1)};t.alignBottom=function(n){n.preventDefault();t.preAlign();$.each(t.target,function(n,i){var r=t.selector.getrotatedcoordsoffset(i,i.x,i.y),h=Math.min.apply(Math,[r.y1,r.y2,r.y3,r.y4]),f=Math.max.apply(Math,[r.y1,r.y2,r.y3,r.y4]),e=(f-h)/2,u,o,s;(t.selector.clipisicon(i)||t.selector.clipisgroup(i))&&!t.selector.explodedmode&&(u=t.selector.clipisgroup(i)?t.selector.getgroupcoords(i):t.selector.geticoncoords(i),o=Math.max.apply(Math,[u.y1,u.y2,u.y3,u.y4]),s=o-f,e+=s);setTimeout(function(){i.y=-e+(t.selector.y-t.selector.selectionborderh+t.selector.height/2);i.update()},1)});setTimeout(function(){t.posAlign()},1)};t.start()}