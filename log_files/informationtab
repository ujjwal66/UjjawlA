Informationtab=function(n){var t=this;t.dom;t.drawningboard=n;t.x;t.y;t.layer;t.rotation;t.height;t.width;t.target;t.oldx;t.oldy;t.oldHeight;t.oldWidth;$.widget("ui.lyspinner",$.ui.spinner,{options:{step:1,spin:function(n){var i="front";return $(n.originalEvent.originalEvent.toElement).hasClass("ui-icon-triangle-1-s")?i="back":$(n.originalEvent.originalEvent.target).hasClass("ui-icon-triangle-1-s")?i="back":n.originalEvent.originalEvent.wheelDelta<0&&(i="back"),i=="front"?t.drawningboard.selector.front():t.drawningboard.selector.back(),t.update(),!1},change:function(){var n=$(this).val();isNaN(n)&&$(this).val("-")}},_parse:function(n){return n=String(n),n=n.match(/\d+/),n!=undefined?parseInt(n[0]):0},_format:function(n){return n}});$.widget("ui.rotspinner",$.ui.spinner,{options:{step:1,spin:function(n){var i="front";return $(n.originalEvent.originalEvent.toElement).hasClass("ui-icon-triangle-1-s")?i="back":$(n.originalEvent.originalEvent.target).hasClass("ui-icon-triangle-1-s")?i="back":n.originalEvent.originalEvent.wheelDelta<0&&(i="back"),t.drawningboard.selector.contextaction=!0,i=="front"?t.drawningboard.selector.rotateright():t.drawningboard.selector.rotateleft(),t.update(),t.drawningboard.selector.contextrelease(),!1},change:function(){var n=$(this).val();isNaN(n)&&$(this).val("-")}},_parse:function(n){return n=String(n),n=n.match(/\d+/),n!=undefined?parseInt(n[0]):0},_format:function(n){return n+"°"}});t.start=function(){t.dom=$("#informationtab");t.x=t.dom.find(".x");t.y=t.dom.find(".y");t.layer=t.dom.find(".layer");t.rotation=t.dom.find(".rotation");t.height=t.dom.find(".height");t.width=t.dom.find(".width");t.registerEvents();t.update()};t.select=function(n){t.unselect();t.target=n};t.unselect=function(){t.x.is(":focus")&&t.x.blur();t.y.is(":focus")&&t.y.blur();t.width.is(":focus")&&t.width.blur();t.height.is(":focus")&&(console.log("xuxu"),t.height.blur());t.target=[]};t.update=function(n){t.target?(t.target.length==1?(t.drawningboard.selector.explodedmode?t.loadLayer(t.target[0].subid):t.loadLayer(t.target[0].index),t.loadRotation(t.target[0].rotation)):(t.drawningboard.selector.targetisicon()?t.loadLayer(t.target[0].index):t.loadLayer(null),t.loadRotation(null)),t.loadX(t.drawningboard.selector.x,n),t.loadY(t.drawningboard.selector.y,n),t.loadWidth(t.drawningboard.selector.width-t.drawningboard.selector.selectionborderw*2,n),t.loadHeight(t.drawningboard.selector.height-t.drawningboard.selector.selectionborderh*2,n)):(t.loadLayer(null),t.loadRotation(null),t.loadX(null),t.loadY(null),t.loadWidth(null),t.loadHeight(null))};t.loadLayer=function(n){t.layer.attr("readonly",!0);n!=undefined?(t.layer.val(n),t.layer.lyspinner("value",n)):(t.layer.val("-"),t.layer.lyspinner("value","-"))};t.loadRotation=function(n){t.rotation.attr("readonly",!0);n!=undefined?(t.rotation.val(n+"°"),t.rotation.rotspinner("value",n)):(t.rotation.val("-"),t.rotation.rotspinner("value","-"))};t.loadX=function(n,i){n!=undefined?(!t.x.is(":focus")||i)&&(t.oldx=n,t.x.val(parseInt(n)+"px"),t.x.removeAttr("disabled")):(t.x.val("-"),t.x.attr("disabled","disabled"))};t.loadY=function(n,i){n!=undefined?(!t.y.is(":focus")||i)&&(t.oldy=n,t.y.val(parseInt(n)+"px"),t.y.removeAttr("disabled")):(t.y.val("-"),t.y.attr("disabled","disabled"))};t.loadWidth=function(n,i){n?(!t.width.is(":focus")||i)&&(t.oldWidth=n,t.width.val(parseInt(n)+"px"),t.width.removeAttr("disabled")):(t.width.val("-"),t.width.attr("disabled","disabled"))};t.loadHeight=function(n,i){n?(!t.height.is(":focus")||i)&&(t.oldHeight=n,t.height.val(parseInt(n)+"px"),t.height.removeAttr("disabled")):(t.height.val("-"),t.height.attr("disabled","disabled"))};t.registerEvents=function(){t.layer.lyspinner().val("-");t.rotation.rotspinner().val("-");var n=t.x.add(t.y).add(t.width).add(t.height);n.on("focus",function(){$(this).mask("9999");$(this).val("")});n.on("blur",function(){$(this).unmask()});n.keybind("keydown",{"return":function(){$(this).blur()},escape:function(n){t.update(!0);n.stopPropagation();$(this).blur()}});t.width.on("blur",function(){var n=$(this).val(),i;n!=""&&n<t.drawningboard.width?(i=n/t.oldWidth,t.drawningboard.selector.setscale(i,null),t.drawningboard.selector.contextaction=!0,t.drawningboard.selector.contextrelease(),setTimeout(function(){t.loadWidth(n)},1)):t.loadWidth(oldWidth)});t.height.on("blur",function(){var n=$(this).val(),i;n!=""&&n<t.drawningboard.height?(i=n/t.oldHeight,t.drawningboard.selector.setscale(null,i),t.drawningboard.selector.contextaction=!0,t.drawningboard.selector.contextrelease(),setTimeout(function(){t.loadHeight(n)},1)):t.loadHeight(oldHeight)});t.x.add(t.y).on("blur",function(){var n=t.x.val(),i=t.y.val(),r=t.drawningboard.selector.x,u=t.drawningboard.selector.y,f,e;n!=""&&i!=""?(n=n.match(/\d+/)[0],i=i.match(/\d+/)[0],n>t.drawningboard.width&&(n=t.drawningboard.width),i>t.drawningboard.height&&(i=t.drawningboard.height),f=n-r,e=i-u,t.drawningboard.selector.settargetpositionoffset(t.target,f,e),t.drawningboard.selector.contextaction=!0,t.drawningboard.selector.contextrelease(),setTimeout(function(){t.loadX(n);t.loadY(i)},1)):(t.loadX(r),t.loadY(u))})};t.start()}